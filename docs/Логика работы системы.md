## Логика работы системы

### Авторизация пользователя (веб-сайт и мобильное приложение):

1. Пользователь заходит на сайт или в мобильное приложение и вводит свои учетные данные.
2. Система использует **Laravel Sanctum** для аутентификации пользователя.
3. **LaravelApp** отправляет запрос к **UserTable** для проверки данных пользователя, после чего генерируется токен с помощью **SanctumToken**, который сохраняется и ассоциируется с текущим пользователем.
4. В случае успешной авторизации токен сохраняется и используется для дальнейших запросов на сервер (как с сайта, так и из мобильного приложения).

### Задание вопроса через сайт:

1. Пользователь, авторизовавшись на сайте, заходит в раздел "Вопрос-Ответ" и задает вопрос.
2. Вопрос отправляется через **LaravelApp** на сервер и передается в **WsServer** через асинхронное сообщение с использованием **WebSocket**.
3. Этот процесс управляется компонентами **ClientManager** и **WebSocketRouter**, которые маршрутизируют сообщение к нужному каналу общения.
4. Сообщение кэшируется в **Redis**, что обеспечивает высокую скорость обработки и возможность асинхронной работы.

### Отображение вопроса менеджеру в админ-панели:

1. Вопрос, отправленный пользователем, отображается в админ-панели, которая реализована на React с помощью **React Admin**.
2. Админ-панель получает обновления в режиме реального времени через WebSocket-соединение, аналогичное процессу на стороне пользователя.
3. **WsServer** маршрутизирует сообщение к менеджеру через **WebSocketRouter** и **BroadcastingModule**.
4. Менеджер видит вопрос и отправляет ответ.

### Ответ менеджера и продолжение общения на мобильном устройстве:

1. После того, как менеджер отправляет ответ через админ-панель, это сообщение также обрабатывается через WebSocket.
2. Ответ передается через **WsServer**, и с помощью **ClientManager** отслеживается связь с пользователем.
3. Если пользователь перешел в мобильное приложение, система (через **AndroidApp**) поддерживает связь с сервером WebSocket.
4. **AndroidApp** отправляет запрос на получение сообщений (включая ответ менеджера).
5. Пользователь продолжает диалог через мобильное приложение. Все сообщения от менеджера будут автоматически приходить в мобильное приложение в режиме реального времени через WebSocket, обеспечивая непрерывность общения.
